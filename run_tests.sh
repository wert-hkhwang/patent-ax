#!/bin/bash
# Patent-AX í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸

set -e

echo "============================================"
echo "   Patent-AX í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸"
echo "============================================"
echo ""

# í˜„ì¬ ë””ë ‰í† ë¦¬ë¥¼ patent-axë¡œ ì„¤ì •
cd "$(dirname "$0")"

# 1. ì„œë¹„ìŠ¤ í—¬ìŠ¤ì²´í¬
echo "ğŸ“¡ [1/3] ì™¸ë¶€ ì„œë¹„ìŠ¤ í—¬ìŠ¤ì²´í¬..."
pytest tests/test_service_health.py::TestExternalServices -v --tb=short || {
    echo "âš ï¸  ì™¸ë¶€ ì„œë¹„ìŠ¤ ì¼ë¶€ ì‹¤íŒ¨ (ê³„ì† ì§„í–‰)"
}
echo ""

# 2. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
echo "ğŸ—„ï¸  [2/3] ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸..."
pytest tests/test_service_health.py::TestDatabaseConnection -v --tb=short || {
    echo "âš ï¸  ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨ (ê³„ì† ì§„í–‰)"
}
echo ""

# 3. íŠ¹í—ˆ ê²€ìƒ‰ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
echo "ğŸ” [3/3] íŠ¹í—ˆ ê²€ìƒ‰ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸..."
pytest tests/test_patent_search.py -v --tb=short
echo ""

echo "============================================"
echo "   í…ŒìŠ¤íŠ¸ ì™„ë£Œ âœ…"
echo "============================================"
