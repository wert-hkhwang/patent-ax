# ========================================
# Patent-AX 환경 변수 설정 (특허 전용)
# ========================================

# === PostgreSQL (특허 데이터) ===
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ax
DB_USER=postgres
DB_PASSWORD=your-password-here

# Patent-AX: 사용 테이블
# - f_patents (1.2M rows)
# - f_patent_applicants (600K rows)

# === Qdrant (벡터 검색) ===
QDRANT_URL=http://210.109.80.106:6333
QDRANT_API_KEY=

# Patent-AX: 특허 컬렉션만
QDRANT_COLLECTION=patents_v3_collection
# - 1.82M points (9.4GB)
# - 1024-dim 임베딩 벡터

# === vLLM (EXAONE 4.0.1) ===
VLLM_BASE_URL=http://210.109.80.106:12288
VLLM_MODEL=LGAI-EXAONE/EXAONE-4.0.1-Instruct-Q5_K_M.gguf
VLLM_API_KEY=

# 생성 파라미터
VLLM_TEMPERATURE=0.1
VLLM_MAX_TOKENS=4000
VLLM_TOP_P=0.9

# === KURE API (임베딩 서버) ===
KURE_API_URL=http://210.109.80.106:7000/api/embedding
# - 1024-dimension 벡터
# - BGE-M3 기반 한국어 최적화

# === cuGraph (그래프 RAG) ===
CUGRAPH_API_URL=http://210.109.80.106:8000
CUGRAPH_ENABLED=true

# Patent-AX: 특허 그래프 노드만
# - patent (특허 문서)
# - applicant (출원인)
# - ipc (국제특허분류)
# - org (기관)

# === Elasticsearch (선택적) ===
# Patent-AX: 현재 미사용 (필요시 주석 제거)
# ES_HOST=http://210.109.80.106:9200
# ES_INDEX=patents
# ES_USER=elastic
# ES_PASSWORD=

# === API 서버 ===
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# CORS 설정
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# === 로그 설정 ===
LOG_LEVEL=INFO
LOG_FILE=logs/patent_ax.log

# === LangGraph 워크플로우 ===
# 검색 제한
SQL_LIMIT=100
RAG_LIMIT=15
ES_LIMIT=20

# Phase 89: 검색 전략
GRAPH_RAG_STRATEGY=hybrid  # vector_only | graph_only | hybrid | graph_enhanced
ES_MODE=off                # off | keyword_boost | primary | aggregation

# Phase 100: ES Scout (현재 비활성화)
ES_SCOUT_ENABLED=false

# === 리터러시 레벨 ===
DEFAULT_LEVEL=일반인  # 초등 | 일반인 | 전문가

# === Phase 102: 신뢰도 점수 ===
CONTEXT_QUALITY_THRESHOLD=0.5  # 0.0 ~ 1.0

# === 세션 관리 ===
SESSION_TIMEOUT_MINUTES=30
MAX_HISTORY_LENGTH=20  # 대화 기록 최대 개수

# === 개발 모드 ===
DEBUG=false
RELOAD=false

# === 프론트엔드 ===
NEXT_PUBLIC_API_URL=http://localhost:8000

# ========================================
# 백업 정보
# ========================================
# Qdrant 백업 위치: /root/AX_BACKUP/qdrant_snapshots/
# - patents_v3_collection.snapshot (9.4GB)
#
# PostgreSQL 백업 스크립트:
# pg_dump -h $DB_HOST -U $DB_USER -t f_patents -t f_patent_applicants $DB_NAME > backup.sql
#
# 복원 가이드: /root/AX_BACKUP/BACKUP_INFO.md

# ========================================
# 주의사항
# ========================================
# 1. GPU 서버 (210.109.80.106) 접근 가능 여부 확인
# 2. Qdrant patents_v3_collection 존재 여부 확인:
#    curl http://210.109.80.106:6333/collections/patents_v3_collection
# 3. vLLM 서비스 상태 확인:
#    curl http://210.109.80.106:12288/health
# 4. PostgreSQL f_patents 테이블 확인:
#    psql -h $DB_HOST -U $DB_USER -d $DB_NAME -c "SELECT COUNT(*) FROM f_patents;"
